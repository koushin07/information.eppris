import{A as I}from"./AdminLayout.48f23481.js";import{C}from"./ContentBox.b05d3d4e.js";import{_ as B}from"./Modal.d6a85013.js";import{h as M}from"./moment.9709ab41.js";import{H as D,a as p,h as j,D as g,b as r,f as x,d as t,F as y,q as S,r as b,o as n,t as _,U as v,k,v as P,x as V}from"./app.4da21ac3.js";import{_ as A}from"./EditHistory.8338df00.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Dropdown.f2c554b9.js";import"./eprris.ccf75d97.js";import"./dialog.03b76927.js";import"./transition.11289989.js";const O={layout:I,components:{Head:D,ContentBox:C,moment:M,Modal:B,EditHistory:A},props:{histories:Object,municipalities:Array,filters:[Array,Object]},setup({filters:i,histories:d}){const c=p(),l=p(!0),w=j(()=>Object.values(d).map(a=>a.reduce((s,f)=>s+f.returned,0)).reduce((a,s)=>a+s,0)),H=j(()=>Object.values(d).map(a=>a.reduce((s,f)=>s+f.quantity,0)).reduce((a,s)=>a+s,0)),m=p(i.search),u=p(0),h=[{name:"Subject"},{name:"From"},{name:"To"},{name:"Date"},{name:"sit. rep."}],e=async()=>{u.value=u.value+10};return g(c,o=>{v.Inertia.get(k().url.value,{municipality:o},{preserveState:!0})}),g(u,o=>{v.Inertia.get(k().url.value,{load:o},{preserveState:!0})}),g(m,o=>{v.Inertia.get(k().url.value,{search:o},{preserveState:!0})}),{totalReturned:w,moment:M,search:m,loadMore:e,totalQuantity:H,update:l,localHeader:h,municipality:c}}},N=i=>(P("data-v-fb0304db"),i=i(),V(),i),q={class:"flex flex-col pt-6"},z={class:"my-1 w-44"},E={class:"table-auto w-full text-sm border-x-2 border-b-2 border-orange-200 text-gray-500 dark:text-gray-400"},L={class:"text-xs text-stone-900 text-center uppercase bg-orange-400 dark:bg-gray-700 dark:text-gray-400"},U={class:"flex flex-row justify-center py-1"},Q={class:"max-h-full even:bg-orange-200 bg-white border-b dark:bg-gray-800 dark:border-gray-700"},R={scope:"row",class:"text-center p-4"},T={class:"text-center"},Y={class:"text-center"},G={class:"text-center"},J={key:0,class:"text-center"},K=["href"],W=N(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),X=[W],Z={key:1,class:"text-center"},$={class:"bg-white"};function tt(i,d,c,l,w,H){const m=b("Head"),u=b("v-select"),h=b("Pagination");return n(),r(y,null,[x(m,{title:"History"}),t("div",q,[t("div",z,[x(u,{options:c.municipalities,modelValue:l.municipality,"onUpdate:modelValue":d[0]||(d[0]=e=>l.municipality=e),placeholder:"Municipalities",label:"municipality"},null,8,["options","modelValue"])]),t("table",E,[t("thead",L,[t("tr",null,[(n(!0),r(y,null,S(l.localHeader,(e,o)=>(n(),r("th",{scope:"col",class:"py-3 px-6",key:o},[t("div",U,[t("span",null,_(e.name),1)])]))),128))])]),t("tbody",null,[(n(!0),r(y,null,S(c.histories.data,(e,o)=>(n(),r("tr",Q,[t("td",R,_(e.incident),1),t("td",T,_(e.borrower),1),t("td",Y,_(e.owner),1),t("td",G,_(l.moment(e.created_at).format("MMMM DD Y")),1),e.filename?(n(),r("td",J,[t("a",{href:"/report/"+e.id,type:"button",target:"_blank",class:"mr-4 font-medium text-green-600 dark:text-orange-500 hover:underline"},X,8,K)])):(n(),r("td",Z," Nothing Found "))]))),256))])]),t("div",$,[x(h,{links:c.histories.links},null,8,["links"])])])],64)}const _t=F(O,[["render",tt],["__scopeId","data-v-fb0304db"]]);export{_t as default};
