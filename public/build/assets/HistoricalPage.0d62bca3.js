import{L as j}from"./MunicipalityLayout.87377acb.js";import{C as q}from"./ContentBox.b05d3d4e.js";import{_ as B}from"./Modal.d6a85013.js";import{h as w}from"./moment.9709ab41.js";import{H as A,a as m,h as N,D as H,b as l,f as M,d as e,z as O,W as V,F as f,q as g,e as L,o as n,t as s,g as S,s as d,c as T,U as C,k as I,v as D,x as E,r as y}from"./app.4da21ac3.js";import{_ as P}from"./EditHistory.8338df00.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";import"./PendingTransactions.6e546873.js";import"./Dropdown.f2c554b9.js";import"./eprris.ccf75d97.js";import"./dialog.03b76927.js";import"./transition.11289989.js";const z={layout:j,components:{Head:A,ContentBox:q,moment:w,Modal:B,EditHistory:P},props:{histories:Object,filters:[Array,Object]},setup({filters:_,histories:i}){const h=[{name:"incident"},{name:"borrower"},{name:"borrowee"},{name:"equipment"},{name:"quantity"},{name:"returned"},{name:"damage"},{name:"set. rep"}],r=m(!0),v=N(()=>Object.values(i).map(c=>c.reduce((t,p)=>t+p.returned,0)).reduce((c,t)=>c+t,0)),k=N(()=>Object.values(i).map(c=>c.reduce((t,p)=>t+p.quantity,0)).reduce((c,t)=>c+t,0)),b=m(_.search),u=m(0),x=async()=>{u.value=u.value+10};return H(u,a=>{C.Inertia.get(I().url.value,{load:a},{preserveState:!0})}),H(b,a=>{C.Inertia.get(I().url.value,{search:a},{preserveState:!0})}),{tableHeader:h,totalReturned:v,moment:w,search:b,loadMore:x,totalQuantity:k,update:r}}},o=_=>(D("data-v-c83a7d4a"),_=_(),E(),_),R={class:"box-border bg-white h-full p-4 md:col-span-3 overflow-y-auto scrollbar"},F={class:"flex flex-col space-y-20 p-7 h-fit"},Q={class:"grid lg:grid-cols-3 sm:gap-10"},W=o(()=>e("span",{class:"text-3xl text-center font-bold"},"TRANSACTION HISTORY",-1)),Y=o(()=>e("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"},"Search",-1)),G={class:"relative col-span-2"},J=o(()=>e("button",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),K={class:"box-content p-6 bg-slate-300"},X={class:"text-lg font-semibold"},Z={class:"table-auto"},$={class:"max-h-full text-sm dark:bg-gray-800 dark:border-gray-700 border-b-2 last:border-b-transparent"},ee={class:"text-center py-2 font-bold"},te={class:"text-center py-2 text-gray-800"},se={class:"text-center py-2 text-gray-800"},oe={class:"text-center py-2 text-gray-800"},ne={class:"text-center py-2 text-gray-800"},re={class:"text-center py-2 text-gray-800"},ae={class:"text-center py-2 text-gray-800"},le=o(()=>e("td",{class:"text-center py-2 text-gray-800"},[e("div",{class:"flex justify-center"},[e("button",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])])])],-1)),ce={class:"text-center py-2 text-gray-800"},ie={key:0},de=o(()=>e("i",{class:"fa-solid fa-left-long"},null,-1)),_e=[de],pe={key:1},ue={key:0,class:"flex flex-col space-y-7 py-5"},he=o(()=>e("div",{class:"grid grid-cols-2 place-content-center"},[e("span",{class:"text-2xl font-bold text-center"},"Attribute"),e("span",{class:"text-2xl font-bold text-center"},"Status")],-1)),be={class:"grid grid-cols-2 place-content-center gap-1"},fe={class:"grid grid-flow-row gap-6"},xe={class:"text-sm"},me=o(()=>e("span",{class:"font-bold"}," Asset ID: ",-1)),ge={class:"text-sm font-normal"},ye=o(()=>e("span",{class:"font-bold"}," Model Number: ",-1)),ve={class:"text-sm font-normal"},ke=o(()=>e("span",{class:"font-bold"}," Serial Number: ",-1)),we={class:"text-sm font-normal"},Ne=o(()=>e("span",{class:"font-bold"}," Category: ",-1)),He={class:"text-sm font-normal"},Me=o(()=>e("span",{class:"font-bold"}," Code: ",-1)),Se={class:"text-sm font-normal"},Ce=o(()=>e("span",{class:"font-bold"}," Unit: ",-1)),Ie={class:"flex flex-col space-y-6"},je={class:"text-sm font-normal text-center"},qe=o(()=>e("span",{class:"font-bold"}," Serviceable: ",-1)),Be={class:"text-sm font-normal text-center"},Ae=o(()=>e("span",{class:"font-bold"}," Unusable: ",-1)),Oe={class:"text-sm font-normal text-center"},Ve=o(()=>e("span",{class:"font-bold"}," Poor: ",-1)),Le={key:0,class:"grid grid-rows-1 place-content-center"};function Te(_,i,h,r,v,k){const b=y("Head"),u=y("Edit-history"),x=y("Modal");return n(),l(f,null,[M(b,{title:"History"}),e("div",R,[e("div",F,[e("div",Q,[W,Y,e("div",G,[J,O(e("input",{type:"search","onUpdate:modelValue":i[0]||(i[0]=a=>r.search=a),class:"block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-full bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search Mockups, Logos...",required:""},null,512),[[V,r.search]])])]),(n(!0),l(f,null,g(h.histories,(a,c)=>(n(),l("div",{class:"flex flex-col cols-span-3 w-fit sm:w-full rounded pb-7 history",key:c},[e("div",K,[e("span",X,s(c),1)]),e("table",Z,[e("thead",null,[e("tr",null,[(n(!0),l(f,null,g(r.tableHeader,(t,p)=>(n(),l("th",{scope:"col",class:"py-3 px-6 text-gray-500 uppercase text-md",key:p},s(t.name),1))),128))])]),e("tbody",null,[(n(!0),l(f,null,g(a,(t,p)=>(n(),l("tr",$,[e("td",ee,s(t.incident),1),e("td",te,s(t.borrower),1),e("td",se,s(t.owner),1),e("td",oe,s(t.equipment),1),e("td",ne,s(t.quantity),1),e("td",re,s(t.returned?t.returned:0),1),e("td",ae,s(t.damage?t.damage:0),1),le,e("td",ce,[e("button",null,[M(x,null,{body:S(()=>[e("button",{onClick:i[1]||(i[1]=De=>r.update=!r.update),class:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},[r.update?(n(),l("span",pe,"update")):(n(),l("div",ie,_e))]),r.update?(n(),l("div",ue,[he,e("div",be,[e("div",fe,[e("span",xe,[me,d(" "+s(t.asset_id?t.asset_id:"NaN"),1)]),e("span",ge,[ye,d(" "+s(t.model_number?t.model_number:"NaN"),1)]),e("span",ve,[ke,d(" "+s(t.serial_number?t.serial_number:"NaN"),1)]),e("span",we,[Ne,d(" "+s(t.category?t.category:"NaN"),1)]),e("span",He,[Me,d(":"+s(t.code?t.code:"NaN"),1)]),e("span",Se,[Ce,d(" "+s(t.unit?t.unit:"NaN"),1)])]),e("div",Ie,[e("span",je,[qe,d(" "+s(t.serviceable?t.serviceable:"0"),1)]),e("span",Be,[Ae,d(" "+s(t.unserviceable?t.unserviceable:"0"),1)]),e("span",Oe,[Ve,d(" "+s(t.poor?t.poor:"0"),1)])])])])):(n(),T(u,{key:1,form:t},null,8,["form"]))]),footer:S(()=>[]),_:2},1024)])])]))),256))])])]))),128)),h.histories.length!==0?(n(),l("div",Le,[e("button",{onClick:i[2]||(i[2]=(...a)=>r.loadMore&&r.loadMore(...a)),class:"bg-orange-300 px-4 py-2 text-black rounded-2xl"}," Load More ")])):L("",!0)])])],64)}const Xe=U(z,[["render",Te],["__scopeId","data-v-c83a7d4a"]]);export{Xe as default};
